<?xml version="1.0"?>
<project name="pathvisio-core" basedir=".">

	<property name="ant.build.javac.target" value="1.5"/>
	<property name="ant.build.javac.source" value="1.5"/>
	<property name="pathvisio.version" value="2.0.11"/>
	<property name="svn.exec.svnversion" value="svnversion"/>
	
	<target name="svnversion">
		<exec executable="${svn.exec.svnversion}" outputproperty="subversion_revision" failifexecutionfails="false">
			<arg line="-n ."/>
		</exec>
	</target>
	
	<target name="prepare" depends="svnversion">
		<echo file="src/org/pathvisio/core/Revision.java">
package org.pathvisio.core;

// Do not modify, this file is automatically generated
public class Revision
{
	public static final String REVISION = "${subversion_revision}";
	public static final String VERSION = "${pathvisio.version}";
}
		</echo>
	</target>
	
	<target name="jar-core" depends="prepare"> 
		<taskdef resource="aQute/bnd/ant/taskdef.properties" classpath="lib/bnd.jar"/> 
		<bnd classpath="src" output="../org.pathvisio.launcher/modules/org.pathvisio.core.jar" eclipse="true" failok="false" exceptions="true" files="org.pathvisio.core.bnd"/> 
	</target>
	
</project>